{% extends 'base.html' %}

{% block content %}
<br>
<br>
<div class="container text-center">
    {% if textmessage is defined %}
        <div class="alert alert-success" role="alert">{{ textmessage }}</div>
    {% endif %}
    <div class="row">
        <div class="col">
            <h2>Personas</h2>
            <iconify-icon icon="material-symbols:groups" style="font-size: 30px;"></iconify-icon>
            <br>
            <hr>
            {% if personas is defined %}
                {% for person in personas %}
                    {{ person['_source']['name'] }}
                    <iconify-icon icon="material-symbols:person" style="font-size: 30px;"></iconify-icon>
                    <a class="btn btn-primary" href="/generate_search_terms/{{ person['_id'] }}"><iconify-icon icon="material-symbols:person"></iconify-icon> Generate Job Search Terms</a>
                {% endfor %}
            {% endif %}
            <br>
            <hr>
            <a href="{{ url_for('create_persona') }}" class="btn btn-primary">
                <iconify-icon icon="material-symbols:add"></iconify-icon> Create Persona
            </a>
        </div>
    </div>

    <br><br>

    <h2>Favorited Jobs</h2>
    <table class="table table-striped table-bordered">
        <thead class="table-light">
            <tr>
                <th scope="col">URL</th>
                <th scope="col">Details</th>
            </tr>
        </thead>
        <tbody>
            {% for favorite in favorites %}
            <tr>
                <td><a href="{{ favorite['_source']['url'] }}" target="_blank">{{ favorite['_source']['url'] }}</a></td>
                <td><a class="btn btn-primary" href="/details/{{ favorite['_id']}}"><iconify-icon icon="material-symbols:topic"></iconify-icon> Details</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <br><br>
    <h2>Document Counts</h2>
    {% for document in buckets %}
        <p>{{ document['key'] }} - {{ document['doc_count'] }}</p>
    {% endfor %}
</div>
{% endblock %}
